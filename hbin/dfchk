#!/bin/bash

(cd ~/dotfiles; git pull --ff-only)
if [[ $1 == '--fwd' ]]; then
	(cd ~/dotfiles/syncconfig; yes r | stack exec syncconfig-exe)
elif [[ $1 == '--destroy-everything' ]]; then
	(cd ~/dotfiles/syncconfig; yes destroy | stack exec syncconfig-exe)
else
	(cd ~/dotfiles/syncconfig; stack exec syncconfig-exe)
fi
echo '*** RESTART (running `syncconfig` again) ***'
sleep 0.5
clear
(cd ~/dotfiles/syncconfig; stack exec syncconfig-exe 2>1 | grep -v 'Stack has not been tested')

