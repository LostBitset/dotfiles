#!/bin/bash

if [[ "$1" == "" ]]; then
	TARGET_CMD="$SHELL"
else
	TARGET_CMD="$1"
fi
NSDEPS="$(cat .nix_shell_deps)"
echo $NSDEPS | tr ' ' '\n' | grep '^gh$' >/dev/null && TARGET_CMD="scoped-gh $TARGET_CMD"
eval "nix-shell -p $NSDEPS --command $TARGET_CMD"

